# 100 - 1. Code Your App

Developing a Docker application is similar to the way you develop an application without Docker. The difference is that while developing for Docker, you're deploying and testing your application or services running within Docker containers in your local environment (either a Linux VM setup by Docker or directly Windows if using Windows Containers).

For the purpose of a universal solution, we subscribe to **gitpod.io**, a service that lets us turn our source code into a Docker container hosted development environment. In our GitHub repositories - where we keep our source code - all one has to do is click the **[Gitpod icon] Open** button near the top of the page when at the start of repository, and gitpod will direct us to this development environment automatically (**note**: the name of the GitHub repository is extended by some random characters, e.g. ```https://agilitygame-home-t4ywwnrcngu.ws-eu111.gitpod.io/```). 

Gitpod lets us specify the configuration of the development environment in a file, **.gitpod.yml**. For example:

```
# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - init: npm install
```
.gitpod.yml

We base our GitHub repository content and structure on the [GitLab CI/CD test automation example](https://github.com/testmoapp/example-gitlab-automation). It is documented in the article [GitLab CI/CD Test Automation Pipeline & Reporting](https://www.testmo.com/guides/gitlab-ci-test-automation). But we will document it here for our specific case.

## 100 - Local Development Environment

Your CI/CD workflow will run inside a Docker container on GitLab's servers (or on your own servers if your team uses a private GitLab instance). But it's still useful to run code locally, e.g. to see if your tests pass during development or to use the ```npm``` package manager to install new packages.

You could do all this directly on your machine, but it's often useful to run code inside a Docker container as well instead. First, it makes it very easy to run any commands and code in the exact same environment: simply use the same Docker container as you use for your CI pipeline. No need to install any prerequisites or dependencies! And second, it makes things more secure as everything runs inside the container without access to your full machine.

We will simply create a new Docker Compose configuration file in our project directory and tell Docker Compose to use the same ```node``` Docker container that we already use for our GitLab CI workflow:

```
# dev/docker-compose.yml
version: '3'
services:
  node:
    image: node:19
    volumes:
      - ./../:/project
    working_dir: /project
```
dev/docker-compose.yml

We can then easily start our Docker container and run code inside it by using the ```docker compose``` command to launch a shell. We can then run any commands and start our tests inside the container **without affecting our main machine**:

== EXECUTE THE FOLLOWING COMMANDS FROM WITHIN YOUR GITPOD WORKSPACE ==

```
gitpod /workspace/home (main) $ cd dev
gitpod /workspace/home/dev (main) $ docker compose run node bash
[+] Creating 1/1
 ✔ Network dev_default  Created                                                                                                               0.1s 
[+] Running 9/9
 ✔ node 8 layers [⣿⣿⣿⣿⣿⣿⣿⣿]      0B/0B      Pulled                                                                                           29.7s 
   ✔ bd73737482dd Pull complete                                                                                                               0.9s 
   ✔ 6710592d62aa Pull complete                                                                                                               0.6s 
   ✔ 75256935197e Pull complete                                                                                                               1.1s 
   ✔ c1e5026c6457 Pull complete                                                                                                               3.7s 
   ✔ f2e4b4cbd0b8 Pull complete                                                                                                               1.2s 
   ✔ aa0a28bddc08 Pull complete                                                                                                               2.1s 
   ✔ a43acb05766e Pull complete                                                                                                               1.6s 
   ✔ 777f451f077e Pull complete                                                                                                               2.0s 
root@514657c1a1fe:/project# 
```

You are now inside your Docker container, containing your code, so any changes are not affecting your Gitpod environment.

## 200 - Setting Up Test Automation



More
